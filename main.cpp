#include <stdint.h>
#include <avr/io.h>
#include <avr/interrupt.h>
#include <avr/pgmspace.h>
#include <avr/wdt.h>
#include <util/delay.h>

#define PhaseA 5
#define PhaseB 6

const uint8_t Sine[]= {
0x00,0x04,0x08,0x0D,0x11,0x16,0x1A,0x1F,0x23,0x27,
0x2C,0x30,0x35,0x39,0x3D,0x41,0x46,0x4A,0x4E,0x53,
0x57,0x5B,0x5F,0x63,0x67,0x6B,0x6F,0x73,0x77,0x7B,
0x7F,0x83,0x87,0x8A,0x8E,0x92,0x95,0x99,0x9C,0xA0,
0xA3,0xA7,0xAA,0xAD,0xB1,0xB4,0xB7,0xBA,0xBD,0xC0,
0xC3,0xC6,0xC8,0xCB,0xCE,0xD0,0xD3,0xD5,0xD8,0xDA,
0xDC,0xDF,0xE1,0xE3,0xE5,0xE7,0xE8,0xEA,0xEC,0xEE,
0xEF,0xF1,0xF2,0xF3,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,
0xFB,0xFB,0xFC,0xFD,0xFD,0xFE,0xFE,0xFE,0xFE,0xFE,
0xFF,0xFE,0xFE,0xFE,0xFE,0xFE,0xFD,0xFD,0xFC,0xFB,
0xFB,0xFA,0xF9,0xF8,0xF7,0xF6,0xF5,0xF3,0xF2,0xF1,
0xEF,0xEE,0xEC,0xEA,0xE8,0xE7,0xE5,0xE3,0xE1,0xDF,
0xDC,0xDA,0xD8,0xD5,0xD3,0xD0,0xCE,0xCB,0xC8,0xC6,
0xC3,0xC0,0xBD,0xBA,0xB7,0xB4,0xB1,0xAD,0xAA,0xA7,
0xA3,0xA0,0x9C,0x99,0x95,0x92,0x8E,0x8A,0x87,0x83,
0x7F,0x7B,0x77,0x73,0x6F,0x6B,0x67,0x63,0x5F,0x5B,
0x57,0x53,0x4E,0x4A,0x46,0x41,0x3D,0x39,0x35,0x30,
0x2C,0x27,0x23,0x1F,0x1A,0x16,0x11,0x0D,0x08,0x04,
0x00
};


void setup() {
  wdt_disable();
  
  Serial.begin(9600);
  pinMode(PhaseA,OUTPUT);
  pinMode(PhaseB,OUTPUT);
  //pinMode(PhaseC,OUTPUT);
  
  //wdt_enable(WDTO_4S);
}
void loop() {
  for(int x=0;x<=180;x++){
    analogWrite(PhaseA,Sine[x]);
    
    delayMicroseconds(50);
  }
  digitalWrite(PhaseA,0);
  
  for(int x=0;x<=180;x++){
    analogWrite(PhaseB,Sine[x]);
    delayMicroseconds(50);
  }
  digitalWrite(PhaseB,0);
  
  
  //wdt_reset();
}
